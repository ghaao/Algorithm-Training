#pragma config(Sensor, S4,     ultra,               sensorSONAR)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

#define threshold 30

task main()
{
  int degree;
  int turn;
float distance = 15.0;
float radius = 2.8;
  int length;
  float backlength;
  
     motor[ motorA ] = 15;
    motor[ motorC ] = 15;
    
    while(SensorValue(ultra) > threshold);
    PlaySound(soundBeepBeep);
      length = SensorValue(ultra);
      while(SensorValue(ultra) <= threshold );
    
      nxtDisplayTextLine( 2, "%d\n", length );
       PlaySound(soundBeepBeep);
      while(SensorValue(ultra) > threshold);
       PlaySound(soundBeepBeep);
         motor[ motorA ] = 0;
        motor[ motorC ] = 0;
    
    nMotorEncoder[ motorA ] = 0;
        nMotorEncoder[ motorC ] = 0;
        turn =(int) 11.4/2.8*45; 
 
  motor[ motorA ] =15;
  motor[ motorC ] = 0;
  while ( nMotorEncoder[ motorA ] <turn);
    motor[ motorA ] =0;
  motor[ motorC ] = 0;

       //back trace.
       backlength = length*sqrt(2);
        degree = (int)( 360.0 *backlength  / ( 2 * 3.14159 * radius ) );
        nMotorEncoder[ motorA ] = 0;
        nMotorEncoder[ motorC ] = 0;
         motor[ motorA ] =-15;
       motor[ motorC ] = -15;
      while ( nMotorEncoder[ motorA ] >-degree&&nMotorEncoder[ motorC ] >-degree);
        motor[ motorA ] =0;
       motor[ motorC ] = 0;
               
       nMotorEncoder[ motorC ] = 0;
   motor[ motorA ] =0;
  motor[ motorC ] = 15;
  while ( nMotorEncoder[ motorC ] <turn);
    motor[ motorA ] =0;
  motor[ motorC ] = 0;
  
}